# CoAP协议

## 什么是CoAP协议

由于物联网中的很多设备都是资源受限型的，即只有少量的内存空间和有限的计算能力，所以传统的HTTP协议应用在物联网上就显得过于庞大而不适用。 IETF的CoRE工作组提出了一种基于REST架构的CoAP协议。CoAP是6LowPAN协议栈中的应用层协议。

CoAP（受约束的应用协议），旨在为简单的电子设备如开关、传感器或阀门等提供在互联网上进行互动通信的能力。特别针对的是那些需要远程控制或监控并且连接在标准互联网网络上的小型低功率设备。CoAP作为一个应用层协议，通常被应用于资源有限的网络连接设备，比如无线传感网络节点。

CoAP的设计目标是要能轻松地映射到HTTP上以简化Web集成，同时满足特殊的需求，如对多播的支持，非常低的开销，以及其简明性。而对多播，低开销，以及简明性的需求在互联网、物联网（IOT）以及机器对机器（M2M）设备中尤为重要。这是因为这些设备往往与传统的互联网设备相比具有更为有限的内存和电源，因此，高效率对它们来说至关重要。CoAP可以在大部分支持UDP或UDP模拟的设备上运行。

CoAP具有低成本和安全的优点。它可以使用10KiB的RAM和100 KiB的代码空间。同时，它的易用性和平台独立性使CoAP对用户更具吸引力。CoAP支持不同的数据类型，如文本、HTML、XML、JSON等。它也可以要求以不同的格式返回消息。

简而言之，CoAP是对HTTP协议的简化版本，仅提供了REST（Representational State Transfer）的四种基本方法：GET, POST, PUT和DELETE。

与HTTP相比，CoAP协议的主要差异在于它对HTTP进行了简化。下面列举了一些具体的差异：

1. **采用UDP:** CoAP协议利用UDP（用户数据报协议）进行通信，这对于资源受限且需要进行IP网络通信的微小设备来说，比使用占用资源和带宽更多的HTTP协议更为合适。特别是对于物联网这类嵌入式设备，资源与带宽的限制是需要优先考虑的问题。
2. **二进制报头:** 不同于HTTP使用的文本格式报头，CoAP采用了二进制报头，这有利于减少数据传输的开销。
3. **头文件选项减少:** CoAP进一步简化了协议，减少了可用的头部选项数量。
4. **减少HTTP方法:** CoAP仅保留了REST架构所需要的四种基本HTTP方法：GET, POST, PUT和 DELETE，且相比于HTTP，CoAP协议的方法更为简洁。
5. **支持设备检测:** CoAP设计了专门的方法来检测和发现设备，这在设备资源有限的情况下非常有用。

总的来说，CoAP让那些受资源限制且需要进行网络通信的设备可以更简洁、有效地实现通信。



## 通讯关系

传感器设备充当CoAP服务器，与其通信的应用程序是CoAP客户端。

在CoAP中，客户端（平台）和服务器（设备）之间的通信是通过CoAP消息进行的。CoAP消息可以是请求或响应。


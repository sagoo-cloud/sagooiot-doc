---
title: '基础概念'
sidebar_position: 1
hide_title: true
keywords: [规则引擎,可视化规则,消息处理,注入节点,调试节点,流程设计,规则配置,节点连接,规则编排,逻辑处理]
description: '详细介绍SagooIOT平台规则引擎的使用方法，包括可视化规则设计、节点配置、消息处理等功能。'
---

### 规则链

规则链是由规则节点及其连接关系组成的逻辑组合，用于定义完整的业务流程。它可以接收来自不同数据源的消息，并根据规则节点的类型与配置，将消息发送到下一个或多个相连的规则节点。通过嵌套与编排，规则链能够实现复杂而灵活的业务逻辑。

### 消息

消息是规则链的输入和输出数据或事件，可被节点组件进行转换、过滤和分发。消息包括以下三部分内容：

1. **消息负荷**：任意形式的数据载体；
2. **元数据**：附加信息，如目标对象的基础信息；
3. **消息类型**：用于区分不同事件的类别。


消息(Message)是传入规则链的输入和输出消息或者事件，它允许被节点组件转换、过滤和分发，包含了以下内容：

- ***Ts：*** 类型：`int64`，消息产生的时间戳
- ***Id：*** 类型：`string`，消息ID，同一条消息在规则引擎流转，整个过程是唯一的
- ***DataType：*** 类型：`string`，取值：JSON、TEXT、BINARY，默认值：`JSON`。如果是JSON类型，在脚本组件中会自动转成对象，可以直接操作json字段。
- ***Type：*** 类型：`string`，消息类型。规则节点组件，可以通过该字段进行路由。
- ***Data：*** 类型：`string`，消息内容
- ***Metadata：*** 类型：`map[string]string`，消息元数据。


### 节点

规则节点是规则链的基本组成部分，每个节点实现特定的业务逻辑功能。节点可以对接收到的消息进行以下操作：

- **过滤**：筛选符合条件的消息；
- **转换**：将消息内容进行格式或结构上的改变；
- **丰富**：向消息添加额外的信息；
- **动作执行**：触发某些具体操作。

规则节点的行为与输出可以通过参数配置进行灵活调整。

### 关系类型

关系类型定义了规则链中节点之间的连接方式，决定消息在规则链中的路径选择。不同类型的节点组件提供不同的连接关系：

- **过滤类节点**：提供 True/False/Failure 三种关系；
- **动作类节点**：通常提供 Success/Failure 关系；
- **路由类节点**：支持通过脚本动态控制路由或根据 `msgType`（消息类型）实现复杂的路径选择，如脚本路由或 `msgType` 路由等。


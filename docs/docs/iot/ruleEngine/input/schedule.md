---
title: '定时调度'
sidebar_position: 5
hide_title: true
keywords: [规则引擎,定时调度,定时任务,cron表达式,调度配置,周期执行,自动化任务,时间触发,调度节点,定时器]
description: '详细介绍SagooIOT平台规则引擎中定时调度节点的功能和使用方法，包括cron表达式配置、调度规则、使用场景、最佳实践等内容，帮助用户实现自动化的定时任务处理。'
---


定时调度节点是规则引擎中的一个重要组件，它允许您创建和管理基于时间的自动化任务。通过配置cron表达式，您可以精确控制任务的执行时间和频率。

## 节点配置说明

### 1. 基本设置

- **节点ID**: 节点的唯一标识符
- **名称**: 为节点设置一个描述性的名称
- **描述**: 添加节点的详细说明
- **调试模式**: 可开启调试模式查看执行结果

### 2. 路由设置

在路由设置标签页中，您可以：

- 配置cron表达式来定义任务的执行时间
- 添加多个定时任务配置
- 管理和编辑现有的定时任务

## Cron表达式说明

### 1. 表达式格式

Cron表达式由6个字段组成，从左到右分别是：

```
秒 分 时 日 月 周
```

每个字段的取值范围：

| 字段     | 允许值          | 允许的特殊字符 |
|--------|--------------|----------|
| 秒      | 0-59         | * / , -   |
| 分      | 0-59         | * / , -   |
| 时      | 0-23         | * / , -   |
| 日      | 1-31         | * / , - ? |
| 月      | 1-12 或 JAN-DEC | * / , -   |
| 周      | 0-6 或 SUN-SAT | * / , - ? |

### 2. 特殊字符说明

- `*`: 表示所有值
- `/`: 指定增量值
- `,`: 指定多个值
- `-`: 指定范围
- `?`: 不指定具体值（仅用于日和周字段）

### 3. 预定义表达式

为了便于使用，系统提供了以下预定义表达式：

| 表达式                    | 说明       | 等价cron表达式      |
|------------------------|----------|-----------------|
| @yearly (或 @annually)  | 每年执行一次   | 0 0 0 1 1 *    |
| @monthly               | 每月执行一次   | 0 0 0 1 * *    |
| @weekly                | 每周执行一次   | 0 0 0 * * 0    |
| @daily (或 @midnight)   | 每天执行一次   | 0 0 0 * * *    |
| @hourly                | 每小时执行一次  | 0 0 * * * *    |

## 使用场景示例

### 1. 定时数据采集

```
# 每5分钟采集一次数据
*/5 * * * * *
```

### 2. 日常维护任务

```
# 每天凌晨2点执行
0 0 2 * * *
```

### 3. 工作日定时任务

```
# 工作日上午9点执行
0 0 9 * * 1-5
```

## 最佳实践

1. **合理设置执行频率**
   - 避免过于频繁的执行
   - 考虑系统资源消耗
   - 合理分配执行时间

2. **任务执行时间**
   - 避免在业务高峰期执行重任务
   - 合理错开多个任务的执行时间
   - 为长时间任务预留足够的执行窗口

3. **错误处理**
   - 配置任务超时时间
   - 添加必要的错误通知
   - 做好任务执行日志

## 注意事项

1. **配置检查**
   - 确保cron表达式格式正确
   - 验证执行时间是否符合预期
   - 检查是否存在时间冲突

2. **资源管理**
   - 控制并发任务数量
   - 监控资源使用情况
   - 及时清理过期任务

3. **调试建议**
   - 使用调试模式验证配置
   - 观察首次执行情况
   - 检查执行日志

## 常见问题

1. **任务未按时执行**
   - 检查cron表达式是否正确
   - 确认节点是否已启用
   - 查看系统时间是否准确

2. **执行时间异常**
   - 检查时区设置
   - 验证特殊字符使用是否正确
   - 确认月份和星期的值是否冲突

3. **性能问题**
   - 检查任务执行时长
   - 评估执行频率是否合理
   - 优化任务处理逻辑

通过合理配置定时调度节点，您可以实现各种自动化的定时任务处理需求。记得定期检查和维护您的定时任务配置，确保系统稳定高效运行。

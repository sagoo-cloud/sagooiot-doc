
# 指标管理

### 1. 系统配置问题

#### Q: 创建指标时找不到指标类型选项？
**A:** 这是因为系统参数配置不完整，请按以下步骤检查：
1. 确认标签管理中已创建指标类型标签
2. 检查系统参数中是否配置了 `sys.indicator.type.tagCode`
3. 确认参数值与标签管理中的根标识一致
4. 重启相关服务或刷新页面

#### Q: 指标类型下拉框为空？
**A:** 解决步骤：
1. 进入"标签管理"，创建指标分类标签：
   ```
   示例标签结构：
   - 指标类型（根标签）
     ├── 设备指标
     ├── 电力指标
     ├── 水质指标
     └── 环境指标
   ```
2. 进入"系统参数"，配置：
   ```
   参数键名：sys.indicator.type.tagCode
   参数值：[标签根标识]
   ```
3. 保存配置后刷新页面

#### Q: 数据建模KEY输入后提示找不到？
**A:** 检查以下几点：
1. 确认数据中心中是否存在该数据建模模板
2. 检查数据建模模板是否已启用
3. 确认数据建模是否正常采集数据
4. 验证KEY的拼写是否正确

### 2. 指标创建问题

#### Q: 指标编码重复怎么办？
**A:** 指标编码必须唯一，建议使用以下命名规范：
```
{业务域}_{指标类型}_{具体描述}
示例：device_power_consumption（设备用电量）
     water_quality_cod（水质COD）
```

#### Q: 计算公式验证失败？
**A:** 检查以下几点：
1. 公式语法是否正确
2. 参数名称是否与数据字段匹配
3. 数据类型是否兼容
4. 是否缺少必要的参数

### 3. 数据查询问题

#### Q: 查询不到指标计算结果？
**A:** 可能的原因：
1. 指标未发布或刚发布还未开始计算
2. 查询时间范围内没有满足计算条件的数据
3. 维度筛选条件过于严格
4. 计算任务执行失败
5. 数据建模未正常采集数据（定时计算指标）

**解决方案：**
1. 检查指标发布状态
2. 扩大时间查询范围
3. 放宽维度筛选条件
4. 查看定时任务执行日志
5. 确认数据建模是否正常工作

#### Q: 指标计算结果不准确？
**A:** 检查以下方面：
1. **数据源检查**：确认数据建模采集的数据是否正确
2. **计算公式检查**：验证计算公式和参数配置是否正确
3. **时间窗口检查**：确认计算的时间窗口设置是否合理
4. **维度配置检查**：验证维度设置是否与实际业务需求匹配
5. **计算策略检查**：确认选择的计算策略是否适合业务场景

#### Q: 不同计算策略的结果如何理解？
**A:** 各计算策略结果说明：
1. **聚合计算**：显示统计汇总结果（最大值、最小值、平均值、总和、数量）
2. **累计计算**：显示累计值和当期值
3. **数学计算**：显示根据自定义公式计算的结果
4. **条件计算**：显示基于条件逻辑的判断结果
5. **统计分析**：显示统计学指标（方差、标准差等）

#### Q: 为什么看不到原始数据？
**A:** 指标管理系统的设计理念是展示经过计算处理的指标结果，而不是未经处理的原始数据。如需查看原始数据，请：
1. 进入"数据中心" → "数据建模"查看采集的原始数据
2. 或通过相关的数据源管理工具查看
3. 指标系统专注于提供有业务意义的计算结果

### 4. 性能问题

#### Q: 查询速度慢？
**A:** 优化建议：
1. 缩小时间查询范围
2. 使用维度筛选减少数据量
3. 避免在高峰期进行大量查询
4. 联系管理员优化数据库索引

#### Q: 计算任务执行慢？
**A:** 可能的原因：
1. 原始数据量过大
2. 计算公式复杂
3. 系统资源不足

**解决方案：**
1. 优化计算公式
2. 调整计算周期
3. 分批处理大量数据

### 5. 权限问题

#### Q: 无法查看某些指标？
**A:** 可能是权限限制，请联系管理员分配相应权限。

### 6. 系统集成问题

#### Q: 定时任务不执行？
**A:** 
1. 检查定时任务服务是否正常运行
2. 确认计算周期配置是否正确
3. 查看任务执行日志排查错误
4. 确认数据源和数据建模是否正常工作

#### Q: 定时计算指标无计算结果？
**A:** 按以下顺序检查：
1. **数据源检查**：
   - 数据源连接是否正常
   - 数据源中是否有可用于计算的数据
2. **数据建模检查**：
   - 数据建模是否启用并正常运行
   - 数据采集是否正常工作
   - 数据建模表中是否有足够的数据供计算使用
3. **指标配置检查**：
   - 数据建模KEY是否正确匹配
   - 计算公式和参数配置是否正确
   - 时间窗口和计算周期设置是否合理
   - 维度配置是否与数据字段匹配
4. **任务执行检查**：
   - 定时任务是否正常创建和执行
   - 查看任务执行日志排查计算错误
   - 确认计算服务是否正常运行

**重要提醒**：定时计算指标依赖数据建模提供的数据进行计算，必须确保整个数据流链路正常工作才能产生指标计算结果。

---
sidebar_position: 3
hide_title: true
title: ç«¯å£é…ç½®
---


æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†SagooIoTç³»ç»Ÿä¸­ä½¿ç”¨çš„æ‰€æœ‰ç«¯å£é…ç½®ä¿¡æ¯ã€‚åŒ…æ‹¬ç³»ç»Ÿæ ¸å¿ƒæœåŠ¡ã€æ•°æ®åº“æœåŠ¡ã€MQTTæœåŠ¡ä»¥åŠæµåª’ä½“æœåŠ¡ç­‰å„ä¸ªç»„ä»¶çš„é»˜è®¤ç«¯å£å’Œé…ç½®æ–¹æ³•ã€‚é€šè¿‡æœ¬æ–‡æ¡£ï¼Œæ‚¨å¯ä»¥äº†è§£ï¼š

- ç³»ç»Ÿå„ç»„ä»¶çš„é»˜è®¤ç«¯å£é…ç½®
- å¦‚ä½•ä¿®æ”¹å„ä¸ªæœåŠ¡çš„ç«¯å£
- ç«¯å£ä¿®æ”¹æ—¶çš„æ³¨æ„äº‹é¡¹
- ç‰¹å®šåœºæ™¯ä¸‹çš„ç«¯å£é…ç½®å»ºè®®

### ç³»ç»Ÿæ ¸å¿ƒç«¯å£

| æœåŠ¡ç±»å‹ | ç«¯å£å· | é…ç½®è·¯å¾„ | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|----------|--------|------|
| ğŸŒ HTTPæœåŠ¡ | 8200 | `server.address` | ":8200" | WebæœåŠ¡ä¸»ç«¯å£ |
| ğŸ” æ€§èƒ½åˆ†æ(PProf) | 58088 | `system.pprofPort` | ":58088" | æ€§èƒ½åˆ†æè°ƒè¯•ç«¯å£ |
| ğŸ”§ Web-Admin PProf | 58089 | `server.adminPprofPort` | ":58089" | ç®¡ç†ç•Œé¢æ€§èƒ½åˆ†æ |
| ğŸ“Š TDEngine | 6041 | `tsd.tdengine.dsn` | ":6041" | æ—¶åºæ•°æ®åº“è¿æ¥ |
| ğŸ’¾ Redis | 6379 | `redis.default.address` | ":6379" | Redisæ•°æ®åº“ |
| ğŸ—„ï¸ MySQL* | 3306 | `database.default.link` | ":3306" | MySQLæ•°æ®åº“ |
| ğŸ“ PostgreSQL* | 5432 | `database.default.link` | ":5432" | PostgreSQLæ•°æ®åº“ |
| âš™ï¸ è§„åˆ™å¼•æ“ | 9090 | `rule.server` | ":9090" | è§„åˆ™æœåŠ¡ |
| ğŸ“¡ MQTT-EMQX* | 1883 | `mqtt.addr` | ":1883" | EMQX MQTTæœåŠ¡ç«¯å£ |
| ğŸ”Œ MQTT-TCP* | 1883 | `mqtt.sagooMQTT.listeners` | ":1883" | SagooMQTT TCPç«¯å£ |
| ğŸŒ MQTT-WS* | 1882 | `mqtt.sagooMQTT.listeners` | ":1882" | SagooMQTT WebSocketç«¯å£ |
| â¤ï¸ MQTT-Health* | 1880 | `mqtt.sagooMQTT.listeners` | ":1880" | SagooMQTT å¥åº·æ£€æŸ¥ç«¯å£ |

:::tip æ•°æ®åº“è¯´æ˜
MySQL(3306)å’ŒPostgreSQL(5432)ç«¯å£é…ç½®æ ¹æ®å®é™…é€‰æ‹©çš„æ•°æ®åº“ç±»å‹è€Œå®šï¼Œç³»ç»Ÿæ”¯æŒè¿™ä¸¤ç§æ•°æ®åº“ï¼Œæ‚¨åªéœ€è¦é…ç½®æ‰€é€‰æ•°æ®åº“å¯¹åº”çš„ç«¯å£å³å¯ã€‚
:::

:::tip MQTTæœåŠ¡è¯´æ˜
MQTTæœåŠ¡æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š
1. EMQXï¼šä½¿ç”¨å¤–éƒ¨MQTTæœåŠ¡å™¨ï¼Œåªéœ€é…ç½®MQTT-EMQXç«¯å£
2. SagooMQTTï¼šä½¿ç”¨å†…ç½®MQTTæœåŠ¡å™¨ï¼Œéœ€è¦é…ç½®TCPã€WebSocketå’Œå¥åº·æ£€æŸ¥ä¸‰ä¸ªç«¯å£
:::

### æµåª’ä½“æœåŠ¡ç«¯å£

| æœåŠ¡ç±»å‹ | ç«¯å£å· | é…ç½®è·¯å¾„ | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|----------|--------|------|
| ğŸ¥ ç½‘å…³æœåŠ¡ | 8080 | `global.http.listenaddr` | ":8080" | APIç½‘å…³HTTPç«¯å£ |
| ğŸ”’ ç½‘å…³HTTPS | 8443 | `global.http.listenaddrtls` | ":8443" | APIç½‘å…³HTTPSç«¯å£ |
| ğŸ“¡ GB28181-SIP | 5060 | `gb28181.port.sip` | "udp:5060" | GB28181 SIPæœåŠ¡ç«¯å£ |
| ğŸ¬ GB28181-Media | 58200-59200 | `gb28181.port.media` | "tcp:58200-59200" | GB28181åª’ä½“ç«¯å£èŒƒå›´ |
| ğŸ“º RTMP | 1935 | `rtmp.tcp.listenaddr` | ":1935" | RTMPæœåŠ¡ç«¯å£ |
| ğŸï¸ RTSP | 554 | `rtsp.listenaddr` | ":554" | RTSPæœåŠ¡ç«¯å£ |
| ğŸ”„ RTSP-UDP | 8000 | `rtsp.udpaddr` | ":8000" | RTSP UDPç«¯å£ |
| ğŸ” RTSP-RTCP | 8001 | `rtsp.rtcpaddr` | ":8001" | RTSP RTCPç«¯å£ |
| ğŸŒ WebTransport | 4433 | `webtransport.listenaddr` | ":4433" | WebTransportç«¯å£ |
| ğŸ® WebRTC | 9000 | `webrtc.port` | "tcp:9000" | WebRTCç«¯å£ |

## ç«¯å£ä¿®æ”¹å¿«é€ŸæŒ‡å—

### ç³»ç»Ÿæ ¸å¿ƒé…ç½®

```yaml
# Webä¸»æœåŠ¡ç«¯å£ï¼ˆå¿…éœ€ï¼‰
server:
  address: ":8200"  âœ  ":æ–°ç«¯å£"

# æ€§èƒ½åˆ†æç«¯å£ï¼ˆå¯é€‰ï¼‰
system:
  pprofPort: "58088"  âœ  ":æ–°ç«¯å£"     # ç³»ç»Ÿæ€§èƒ½åˆ†æç«¯å£
server:
  adminPprofPort: "58089"  âœ  "æ–°ç«¯å£" # Webç®¡ç†æ€§èƒ½åˆ†æç«¯å£

# ä¸»æ•°æ®åº“è¿æ¥ï¼ˆå¿…éœ€ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ç§ï¼‰
database:
  default:
    # MySQLæ–¹å¼
    link: "mysql:root:password@tcp(ip:3306)/dbname"  âœ  "mysql:root:password@tcp(ip:æ–°ç«¯å£)/dbname"
    # æˆ– PostgreSQLæ–¹å¼
    link: "pgsql:user:password@tcp(ip:5432)/dbname"  âœ  "pgsql:user:password@tcp(ip:æ–°ç«¯å£)/dbname"

# æ—¶åºæ•°æ®åº“ï¼ˆå¿…éœ€ï¼‰
tsd:
  tdengine:
    dsn: "root:taosdata@ws(ip:6041)/"  âœ  "root:taosdata@ws(ip:æ–°ç«¯å£)/"

# Redisç¼“å­˜æ•°æ®åº“ï¼ˆå¿…éœ€ï¼‰
redis:
  default:
    address: "ip:6379"  âœ  "ip:æ–°ç«¯å£"

# MQTTæœåŠ¡é…ç½®ï¼ˆå¿…éœ€ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ç§ï¼‰
mqtt:
  # é€‰é¡¹1ï¼šä½¿ç”¨EMQXï¼ˆå¤–éƒ¨MQTTæœåŠ¡å™¨ï¼‰
  mqttAppName: "emqx"
  addr: "ip:1883"  âœ  "ip:æ–°ç«¯å£"    # MQTTæœåŠ¡å™¨åœ°å€å’Œç«¯å£

  # é€‰é¡¹2ï¼šä½¿ç”¨SagooMQTTï¼ˆå†…ç½®MQTTæœåŠ¡å™¨ï¼‰
  mqttAppName: "sagoomqtt"
  sagooMQTT:
    listeners:
      - type: "tcp"
        address: ":1883"  âœ  ":æ–°ç«¯å£"     # MQTT TCPç«¯å£
      - type: "ws"
        address: ":1882"  âœ  ":æ–°ç«¯å£"     # MQTT WebSocketç«¯å£
      - type: "healthcheck"
        address: ":1880"  âœ  ":æ–°ç«¯å£"     # å¥åº·æ£€æŸ¥ç«¯å£

# è§„åˆ™å¼•æ“æœåŠ¡ï¼ˆå¿…éœ€ï¼‰
rule:
  server: ":9090"  âœ  ":æ–°ç«¯å£"    # è§„åˆ™å¼•æ“ç›‘å¬ç«¯å£
```

### æµåª’ä½“æœåŠ¡é…ç½®

```yaml
global:
  # ç½‘å…³æœåŠ¡é…ç½®
  http:
    listenaddr: ":8080"  âœ  ":æ–°ç«¯å£"    # HTTPç«¯å£ï¼ˆå¿…éœ€ï¼‰
    listenaddrtls: ":8443"  âœ  ":æ–°ç«¯å£"  # HTTPSç«¯å£ï¼ˆå¯é€‰ï¼Œéœ€è¦é…ç½®è¯ä¹¦ï¼‰

# GB28181æœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
gb28181:
  port:
    sip: "udp:5060"  âœ  "udp:æ–°ç«¯å£"            # SIPæœåŠ¡ç«¯å£
    media: "tcp:58200-59200"  âœ  "tcp:æ–°ç«¯å£èŒƒå›´"  # åª’ä½“æœåŠ¡ç«¯å£èŒƒå›´

# RTMPæœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
rtmp:
  tcp:
    listenaddr: ":1935"  âœ  ":æ–°ç«¯å£"

# RTSPæœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
rtsp:
  listenaddr: ":554"  âœ  ":æ–°ç«¯å£"    # RTSPä¸»ç«¯å£
  udpaddr: ":8000"  âœ  ":æ–°ç«¯å£"      # RTSP UDPç«¯å£
  rtcpaddr: ":8001"  âœ  ":æ–°ç«¯å£"     # RTSP RTCPç«¯å£

# WebTransportæœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
webtransport:
  listenaddr: ":4433"  âœ  ":æ–°ç«¯å£"

# WebRTCæœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
webrtc:
  port: "tcp:9000"  âœ  "tcp:æ–°ç«¯å£"
```

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

1. ğŸ“Œ **ç«¯å£å ç”¨æ£€æŸ¥**
   - ä¿®æ”¹å‰ç¡®ä¿æ–°ç«¯å£æœªè¢«å…¶ä»–æœåŠ¡å ç”¨
   - å¯ä½¿ç”¨ `netstat -an | grep ç«¯å£å·` æ£€æŸ¥
   - ç‰¹åˆ«æ³¨æ„GB28181çš„åª’ä½“ç«¯å£èŒƒå›´ä¸è¦ä¸å…¶ä»–æœåŠ¡å†²çª
   - æ•°æ®åº“ç«¯å£ä¿®æ”¹éœ€è¦åŒæ­¥ä¿®æ”¹æ•°æ®åº“æœåŠ¡çš„é…ç½®

2. ğŸ”’ **é˜²ç«å¢™é…ç½®**
   - ç¡®ä¿é˜²ç«å¢™å·²å¼€æ”¾ç›¸åº”ç«¯å£
   - GB28181éœ€è¦å¼€æ”¾UDP 5060ç«¯å£å’ŒTCP 58200-59200ç«¯å£èŒƒå›´
   - RTMPå’ŒRTSPéœ€è¦å¼€æ”¾å¯¹åº”çš„TCPç«¯å£
   - æ•°æ®åº“ç«¯å£å»ºè®®åªå¯¹ç‰¹å®šIPå¼€æ”¾è®¿é—®

3. ğŸ³ **Dockeréƒ¨ç½²æ³¨æ„**
   - éœ€è¦åœ¨docker-compose.ymlä¸­æ˜ å°„å¯¹åº”ç«¯å£
   - æ³¨æ„å®¹å™¨é—´çš„ç«¯å£ä¾èµ–å…³ç³»
   - å¯¹äºç«¯å£èŒƒå›´é…ç½®ï¼Œéœ€è¦æ˜ å°„æ•´ä¸ªèŒƒå›´
   - æ•°æ®åº“å®¹å™¨çš„ç«¯å£æ˜ å°„éœ€è¦ä¸è¿æ¥é…ç½®ä¿æŒä¸€è‡´

4. ğŸ”„ **æœåŠ¡é‡å¯**
   - ç«¯å£ä¿®æ”¹åéœ€è¦é‡å¯ç›¸å…³æœåŠ¡
   - å»ºè®®æŒ‰æœåŠ¡ä¾èµ–é¡ºåºé‡å¯
   - æµåª’ä½“æœåŠ¡é‡å¯å¯èƒ½ä¼šå½±å“åœ¨çº¿ç”¨æˆ·
   - æ•°æ®åº“ç«¯å£ä¿®æ”¹éœ€è¦é‡å¯æ•°æ®åº“æœåŠ¡

5. ğŸ’¾ **é…ç½®å¤‡ä»½**
   - ä¿®æ”¹å‰å¤‡ä»½åŸå§‹é…ç½®æ–‡ä»¶
   - è®°å½•ä¿®æ”¹å†…å®¹ä¾¿äºå›æ»š
   - ä¿å­˜ç«¯å£æ˜ å°„æ–‡æ¡£
   - æ•°æ®åº“é…ç½®ä¿®æ”¹å‰åŠ¡å¿…å¤‡ä»½æ•°æ®
